<!-- filepath: /home/marcelo/interligaMack/events/templates/events/public_event_list.html -->
{% extends "base.html" %}
{% load static %}

{% block title %}Próximos Eventos - Interliga Mack{% endblock %}

{% block extra_head %}
    {# Adiciona o link para o nosso CSS customizado para esta página #}
    {# Certifique-se que seu base.html tem um bloco extra_head ou similar, #}
    {# ou coloque este link onde você costuma adicionar CSS específico da página. #}
    <link rel="stylesheet" href="{% static 'css/frontend_eventos.css' %}">
{% endblock %}

{% block content %}
<div class="container py-4 event-listing-page">
    <h1 class="mb-4 text-center page-title-events">Próximos Eventos</h1>

    {% if events %}
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 event-grid justify-content-center">
            {% for event in events %}
            <div class="col">
                <a href="{% url 'events:public_event_detail' event.id %}" class="event-card-link">
                    <div class="card h-100 event-card-netflix">
                        {# Tenta imagem_destaque primeiro, depois image, depois placeholder #}
                        {% if event.imagem_destaque %}
                            <img src="{{ event.imagem_destaque.url }}" class="card-img-top event-card-img" alt="{{ event.name }}">
                        {% elif event.image %}
                            <img src="{{ event.image.url }}" class="card-img-top event-card-img" alt="{{ event.name }}">
                        {% else %}
                            <img src="{% static 'images/no_events_placeholder.svg' %}" class="card-img-top event-card-img" alt="Evento sem imagem">
                        {% endif %}
                        
                        {# Overlay para o título, estilo Netflix #}
                        <div class="card-img-overlay event-card-overlay-netflix d-flex flex-column justify-content-end">
                            <h5 class="card-title event-card-title-netflix">{{ event.name }}</h5>
                            {# Poderia adicionar a data aqui de forma sutil se desejado #}
                            {# <p class="event-card-date-netflix"><small>{{ event.date|date:"d/m" }}</small></p> #}
                        </div>

                        {# O conteúdo original do card-body e card-footer foi removido/simplificado #}
                        {# para um visual mais limpo, focado na imagem e título no overlay. #}
                        {# Detalhes como descrição, data completa, status, e botão "Ver Detalhes" #}
                        {# idealmente ficariam na página de detalhes do evento. #}
                        {# Se precisar muito de um botão, podemos estilizá-lo para aparecer no hover, por exemplo. #}
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center py-5">
            <h1 class="display-4 text-muted">Sem eventos no momento</h1>
            <p class="lead mt-3">Por favor, volte mais tarde.</p>
            {% if user.is_authenticated and user.user_type == 'solicitante' %}
                <p class="mt-3">Que tal <a href="{% url 'events:create_event_request' %}">solicitar um novo evento</a>?</p> {# Assumindo que 'events:create_event_request' é o nome da sua URL #}
            {% endif %}
        </div>
    {% endif %}
</div>
{% endblock %}